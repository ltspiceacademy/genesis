Version 4
SHEET 1 2196 1668
WIRE -992 -176 -1072 -176
WIRE -784 -176 -992 -176
WIRE 432 -160 416 -160
WIRE -1072 -128 -1072 -176
WIRE -576 -128 -608 -128
WIRE -512 -128 -576 -128
WIRE -384 -128 -432 -128
WIRE -224 -128 -304 -128
WIRE -80 -128 -224 -128
WIRE 80 -128 0 -128
WIRE 416 -128 416 -160
WIRE 80 -112 80 -128
WIRE -224 -96 -224 -128
WIRE -368 -48 -368 -80
WIRE -64 -48 -64 -80
WIRE -320 -16 -320 -80
WIRE -320 -16 -336 -16
WIRE -16 -16 -16 -80
WIRE -16 -16 -32 -16
WIRE 416 -16 416 -48
WIRE -1072 16 -1072 -48
WIRE -224 16 -224 -32
WIRE 80 16 80 -32
WIRE 432 64 416 64
WIRE 416 96 416 64
WIRE -1008 144 -1280 144
WIRE -800 144 -1008 144
WIRE -544 144 -800 144
WIRE -800 160 -800 144
WIRE -320 160 -320 -16
WIRE -320 160 -480 160
WIRE -304 160 -320 160
WIRE -1280 176 -1280 144
WIRE -544 192 -608 192
WIRE 416 208 416 176
WIRE -800 256 -800 240
WIRE -1280 272 -1280 256
WIRE 1568 320 1472 320
WIRE 1600 320 1568 320
WIRE -800 352 -800 336
WIRE 0 544 -224 544
WIRE 224 592 176 592
WIRE 256 592 224 592
WIRE -224 640 -224 544
WIRE 0 640 -144 640
WIRE -224 736 -224 720
WIRE -144 768 -144 640
WIRE -144 864 -144 848
FLAG -224 16 0
FLAG 416 208 0
FLAG 416 64 sw_dsch
FLAG -368 -48 0
FLAG -1072 16 0
FLAG -992 -176 in
FLAG -576 -128 in
FLAG -32 -16 sw_dsch
FLAG -64 -48 0
FLAG 80 16 0
FLAG 416 -16 0
FLAG 416 -160 sw_acq
FLAG -224 -128 vSH
FLAG 224 592 out
FLAG -224 736 0
FLAG -144 864 0
FLAG -608 192 sw_acq
FLAG -1008 144 enable
FLAG -1280 272 0
FLAG 1568 320 out
FLAG -800 352 0
SYMBOL cap -240 -96 R0
SYMATTR InstName Csh
SYMATTR Value {Csh}
SYMBOL sw -400 -128 R270
SYMATTR InstName S1
SYMATTR Value FET
SYMBOL voltage 416 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 1 {tacq+tsar-tdsch*1.1} {tacq*0.01} {tacq*0.01} {tdsch} {tp})
SYMBOL voltage -1072 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 1.65
SYMBOL res -528 -112 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value {Rain}
SYMBOL sw -96 -128 R270
SYMATTR InstName S2
SYMATTR Value FET
SYMBOL res 64 -128 R0
SYMATTR InstName R3
SYMATTR Value {Rdsch}
SYMBOL voltage 416 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 1 0 {tacq*0.01} {tacq*0.01} {tacq} {tp})
SYMBOL SpecialFunctions\\sample 80 576 R0
WINDOW 39 101 83 Left 2
SYMATTR SpiceLine Vhigh={2**ADC_bit}
SYMATTR InstName A2
SYMBOL bv -224 624 R0
SYMATTR InstName B2
SYMATTR Value V=limit(round(V(vSH)/{ADC_Vref}*ADC_max),0,ADC_max)
SYMBOL voltage -144 752 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 1 0 0 0 {tsar/10} 1) TRIGGER V(sw_acq)<0.5
SYMBOL Digital\\and -512 112 R0
SYMATTR InstName A1
SYMBOL voltage -1280 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 1 10u 0 0 1 1 1)
SYMBOL res -816 144 R0
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL voltage -800 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value {ADC_vref}
TEXT -864 488 Left 2 !*Public Parameters\n******************************\n.param ADC_freq 42meg\n.param ADC_bit 12\n.param ADC_Vref 3.3\n.param Csh 5p\n.param clock_ACQ  12.5\n.param clock_SAR 12.5\n.param Rain 100\n \n*Calculated Values\n******************************\n.param tsar = clock_SAR / ADC_freq\n.param tacq = clock_ACQ / ADC_freq\n.param tdsch = tsar / 4\n.param tp = tsar+tacq\n.param Rdsch = tdsch / (5*Csh) / 4\n.param ADC_max = 2**ADC_bit\n \n*Private Parameters\n******************************
TEXT 816 528 Left 2 !.model FET SW(Ron=1u Roff=100meg Vt=.5 Vh=-.4)
TEXT 920 440 Left 3 ;Component Models
TEXT 200 -496 Left 5 ;Continuous Acquisition Mode
TEXT 608 -248 Left 3 ;Controller Switches
TEXT -1304 408 Left 2 !.tran 0 50u 1u 1n startup
TEXT -288 -256 Left 3 ;Front End
TEXT 40 416 Left 3 ;Digitization
TEXT -1304 496 Left 2 !.options numdgt=7
TEXT -1304 528 Left 2 !.options plotwinsize=0
RECTANGLE Normal 1472 592 768 400 2
RECTANGLE Normal 1520 1184 -928 -416 1
RECTANGLE Normal 1472 272 320 -288 2
RECTANGLE Normal 240 80 -656 -288 2
RECTANGLE Normal 608 912 -304 384 2
